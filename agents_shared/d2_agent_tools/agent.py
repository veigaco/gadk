import sys
sys.path.insert(0, '..')

from agents_shared import types, LlmAgent, Gemini
from agents_shared import McpToolset, StdioConnectionParams, StdioServerParameters
from agents_shared import retry_config


# MCP integration with Everything Server
mcp_image_server = McpToolset(
    connection_params=StdioConnectionParams(
        server_params=StdioServerParameters(
            command="npx",  # Run MCP server via npx
            args=[
                "-y",  # Argument for npx to auto-confirm install
                "@modelcontextprotocol/server-everything",
            ],
            tool_filter=["getTinyImage"],
        ),
        timeout=30,
    )
)

print("âœ… MCP Tool created")


# Create image agent with MCP integration
# image_agent
root_agent = LlmAgent(
    model=Gemini(model="gemini-2.5-flash-lite", retry_options=retry_config),
    name="image_agent",
    instruction="Use the MCP Tool to generate images for user queries",
    tools=[mcp_image_server],
)


